<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <script>
        /**
         * Set `dark` class on body if dark mode should be enabled.
         * Has to be at top of `<body>` so that body exists, and happens
         * as soon as possible.
         */
        if (localStorage.getItem('darkmode') === 'true') {
          document.body.className = 'dark';
        }
      </script>
      
      <section class="container">
        <h1>This is an example page!</h1>
        <p>It just exists to show you how to structure the JavaScript, and to see the toggle in action!</p>
        <p>Refresh the page, or close and reopen the tab to see the state maintained.</p>
        <button id="js-toggle-dark-mode" type="button">Toggle dark mode</button>
        <button onclick="localStorage.clear(); alert('localStorage has been cleared');">Clear localStorage</button>
      </section>
      
      <!-- Load jQuery library before any jQuery methods or $ are used -->
      <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script>
        $(function() {
      
          // Toggleable dark mode
          (function darkMode() {
      
            /**
             * Define the elements we will be working with.
             * ---
             * NOTE: #id selectors are used over .classes because jQuery will use the
             *       .getElementByID() method to traverse the DOM, which is much faster.
             */
      
            var $toggleButton = $('#js-toggle-dark-mode');
            var $body = $('body');
      
            // Set up a function to be used by the click event on $toggleButton
            function toggleDarkMode() {
      
              // Check if body does not have the `dark` class
              if (!$body.hasClass('dark')) {
      
                // If it doesn't, it should when this button is clicked, so add it
                $body.addClass('dark');
      
                /**
                 * We will also add the "true" state to a localStorage item. This is the
                 * property that tells the browser that dark mode should be set.
                 * ---
                 * NOTE: localStorage will only store strings, we can use "true" and
                 *       "false" as values to determine which state should be set.
                 */
      
                localStorage.setItem('darkmode', 'true');
      
              } else {
      
                // If body does have the `dark` class, remove it when the toggle is clicked
                $body.removeClass('dark');
      
                // Also set the storage item to "false"
                localStorage.removeItem('darkmode');
      
              }
      
            }
      
            /**
             * Fire the toggleDarkMode function on each click.
             * ---
             * NOTE: This is called last so that the script will first check against
             *       other conditions, before doing any actual toggling.
             */
      
            $toggleButton.on('click', toggleDarkMode);
      
          })();
      
        });
      </script>
</body>
</html>

